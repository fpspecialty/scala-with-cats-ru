## Применение моноидов

Мы знаем что такое моноид — абстракция сложения или комбинирования — но, где это применимо?
Есть несколько значительных идей, в которых моноиды играют ключевую роль.
Они будут рассмотрены более подробно на примерах далее.

### Большие данные

Фреймворки для работы с большими данными, такие как Spark и Hadoop, распределяют анализ данных на множестве машин,
что обеспечивает отказоустойчивость и масштабируемость.
Это означает, что каждая машина вернёт результат обработки только определённой части данных,
и для получения итогового результата нам потребуется объединить промежуточные.
В подавляющем большинстве случаев это можно рассматривать как моноид.

Если мы хотим подсчитать количество посетителей веб-сайта,
мы можем подсчитать `Int` для каждой порции данных.
Мы знаем, что экземпляр моноида для `Int` определён через операцию сложения, и сложение является подходящим способом объединения частичных результатов.

А если мы хотим подсчитать количество уникальных посетителей веб-сайта,
то это будет эквивалентно тому, чтобы сформировать `Set[User]` из каждой порции данных о просмотрах.
Мы знаем, что `Set` можно объединить, это и будет правильным способом объединить частичные результаты

Если мы захотим подсчитать процентили времени обработки запросов сервером,
мы можем использовать структуру `QTree`, для которой так же имеется моноид.

Надеюсь, вы поняли идею. Результат почти любого анализа больших данных является моноидом,
и поэтому мы можем построить выразительную и мощную аналитическую систему вокруг этой идеи.
Это именно то, что сделали проекты Twitter Algebird и Summingbird.

### Распределённые системы

В распределённых системах
разные машины могут иметь разные представления данных.
Например,
одна машина может получить обновление, которое другие машины ещё не получили.
Мы хотели бы согласовать эти представления,
чтобы все машины имели одинаковые данные, если обновления больше не поступают.
Это называется *согласованность в конечном счёте (eventual consistency)*.

Определенный класс типов данных поддерживает это согласование.
Эти типы данных называются коммутативно реплицируемыми типами данных (CRDT).
Ключевой операцией является возможность объединения двух экземпляров данных,
с результатом, который захватывает всю информацию из обоих экземпляров.

### Моноиды в малом

Два приведенных выше примера представляют собой случаи, когда моноиды затрагивают всю архитектуру системы.
Существует также много случаев, когда наличие моноида облегчает написание небольшого фрагмента кода.
Мы увидим много таких примеров в этой книге.
